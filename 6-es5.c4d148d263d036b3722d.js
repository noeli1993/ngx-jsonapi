!function(){function o(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function t(o,t){for(var b=0;b<t.length;b++){var e=t[b];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function b(o,b,e){return b&&t(o.prototype,b),e&&t(o,e),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Qimh:function(t,e,n){"use strict";n.r(e),n.d(e,"BooksModule",(function(){return B}));var i=n("SVse"),c=n("iInd"),r=n("hnLn"),s=n("1a3L"),a=n("zNQn"),u=n("8Y7J"),l=n("4H9A"),h=n("CZaM"),d=function(o){return["/authors",o]};function f(o,t){if(1&o&&(u.Hb(0,"a",3),u.cc(1),u.Gb()),2&o){var b=u.Pb().$implicit;u.Tb("routerLink",u.Xb(2,d,b.relationships.author.data.id)),u.ub(1),u.dc(b.relationships.author.data.attributes.name)}}function p(o,t){if(1&o&&(u.Hb(0,"span"),u.cc(1),u.Gb()),2&o){var b=t.$implicit;u.ub(1),u.ec("",b.id,", ")}}var k=function(o){return["/books",o]};function H(o,t){if(1&o&&(u.Hb(0,"tr"),u.Hb(1,"td"),u.cc(2),u.Gb(),u.Hb(3,"td"),u.Hb(4,"a",3),u.cc(5),u.Gb(),u.Gb(),u.Hb(6,"td"),u.cc(7),u.Qb(8,"date"),u.Gb(),u.Hb(9,"td"),u.bc(10,f,2,4,"a",4),u.Gb(),u.Hb(11,"td"),u.bc(12,p,2,1,"span",5),u.Gb(),u.Hb(13,"td"),u.Hb(14,"a",6),u.Hb(15,"small"),u.cc(16,"DELETE"),u.Gb(),u.Gb(),u.Gb(),u.Gb()),2&o){var b=t.$implicit;u.ub(2),u.dc(b.id),u.ub(2),u.Tb("routerLink",u.Xb(8,k,b.id)),u.ub(1),u.dc(b.attributes.title),u.ub(2),u.dc(u.Rb(8,6,b.attributes.date_published)),u.ub(3),u.Tb("ngIf",b.relationships.author.builded),u.ub(2),u.Tb("ngForOf",b.relationships.photos.data)}}var G,m=((G=function(){function t(b,e,n,i){var c=this;o(this,t),this.route=b,this.authorsService=e,this.booksService=n,this.photosService=i,b.queryParams.subscribe((function(o){var t=o.page;n.all({page:{number:t||1},include:["author","photos"]}).subscribe((function(o){c.books=o}),(function(o){return console.info("error books controll",o)}))}))}return b(t,[{key:"getAll",value:function(o){var t=this;o.date_published={since:"1983-01-01",until:"2010-01-01"};var b=this.booksService.all({remotefilter:o,page:{number:1},include:["author","photos"]});b.subscribe((function(o){t.books=o,console.log("success books controller",t.books)}),(function(o){return console.info("error books controller",o)})),b.toPromise().then((function(o){return console.log("books loaded PROMISE")}))}},{key:"delete",value:function(o){this.booksService.delete(o.id)}}]),t}()).\u0275fac=function(o){return new(o||G)(u.Eb(c.a),u.Eb(s.a),u.Eb(r.a),u.Eb(a.a))},G.\u0275cmp=u.yb({type:G,selectors:[["demo-books"]],decls:18,vars:4,consts:[[3,"collection"],[1,"table","table-striped"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],[4,"ngFor","ngForOf"],["ng-click","delete(book)","title","not supported by demo server"]],template:function(o,t){1&o&&(u.Hb(0,"h3"),u.cc(1,"Books"),u.Gb(),u.Fb(2,"demo-collection-info",0),u.Hb(3,"table",1),u.Hb(4,"thead"),u.Hb(5,"tr"),u.Hb(6,"th"),u.cc(7,"ID"),u.Gb(),u.Hb(8,"th"),u.cc(9,"Title"),u.Gb(),u.Hb(10,"th"),u.cc(11,"Date Published"),u.Gb(),u.Hb(12,"th"),u.cc(13,"Author"),u.Gb(),u.Hb(14,"th"),u.cc(15,"Photos"),u.Gb(),u.Gb(),u.Gb(),u.bc(16,H,17,10,"tr",2),u.Gb(),u.Fb(17,"demo-collection-paginator",0)),2&o&&(u.ub(2),u.Tb("collection",t.books),u.ub(14),u.Tb("ngForOf",t.books.data)("ngForTrackBy",t.books.trackBy),u.ub(1),u.Tb("collection",t.books))},directives:[l.a,i.i,h.a,c.b,i.j],pipes:[i.d],encapsulation:2}),G),v=n("dC/6");function g(o,t){if(1&o&&(u.Hb(0,"li"),u.cc(1," URI: "),u.Hb(2,"a",4),u.cc(3),u.Gb(),u.Gb()),2&o){var b=t.$implicit;u.ub(2),u.Ub("href",b.attributes.uri,u.Zb),u.ub(1),u.dc(b.attributes.uri)}}function y(o,t){if(1&o&&(u.Hb(0,"ul"),u.bc(1,g,4,2,"li",3),u.Gb()),2&o){var b=u.Pb();u.ub(1),u.Tb("ngForOf",b.book.relationships.photos.data)}}var T,w,F,E=[{path:"",component:m},{path:":id",component:(T=function(){function t(b,e,n,i){var c=this;o(this,t),this.authorsService=b,this.booksService=e,this.photosService=n,this.route=i,i.params.subscribe((function(o){var t=o.id;e.get(t,{include:["author","photos"]}).subscribe((function(o){c.book=o,console.log("success book",c.book)}),(function(o){return console.log("error books controll",o)}))}))}return b(t,[{key:"getAuthorName",value:function(o){var t=o.relationships.author.data;return t.attributes?t.attributes.name:""}}]),t}(),T.\u0275fac=function(o){return new(o||T)(u.Eb(s.a),u.Eb(r.a),u.Eb(a.a),u.Eb(c.a))},T.\u0275cmp=u.yb({type:T,selectors:[["demo-book"]],decls:36,vars:8,consts:[[3,"resource"],[4,"ngIf"],["routerLink","/books"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(o,t){1&o&&(u.Hb(0,"h3"),u.cc(1),u.Gb(),u.Fb(2,"demo-resource-info",0),u.Hb(3,"ul"),u.Hb(4,"li"),u.cc(5,"Title: "),u.Hb(6,"strong"),u.cc(7),u.Gb(),u.Gb(),u.Hb(8,"li"),u.cc(9,"Date Published: "),u.Hb(10,"strong"),u.cc(11),u.Qb(12,"date"),u.Gb(),u.Gb(),u.Gb(),u.Hb(13,"h4"),u.cc(14,"Author (one)"),u.Gb(),u.Hb(15,"p"),u.Hb(16,"small"),u.cc(17,"This a relationship with "),u.Hb(18,"i"),u.cc(19,"hasMany:false"),u.Gb(),u.Gb(),u.Gb(),u.Hb(20,"ul"),u.Hb(21,"li"),u.cc(22,"Name: "),u.Hb(23,"strong"),u.cc(24),u.Gb(),u.Gb(),u.Gb(),u.Hb(25,"h4"),u.cc(26,"Photos (many)"),u.Gb(),u.Hb(27,"p"),u.Hb(28,"small"),u.cc(29,"This a relationship with "),u.Hb(30,"i"),u.cc(31,"hasMany:true"),u.Gb(),u.Gb(),u.Gb(),u.bc(32,y,2,1,"ul",1),u.Hb(33,"p"),u.Hb(34,"a",2),u.cc(35,"Volver"),u.Gb(),u.Gb()),2&o&&(u.ub(1),u.ec("Book #",t.book.id,""),u.ub(1),u.Tb("resource",t.book),u.ub(5),u.dc(t.book.attributes.title),u.ub(4),u.dc(u.Rb(12,6,t.book.attributes.date_published)),u.ub(13),u.dc(t.getAuthorName(t.book)),u.ub(8),u.Tb("ngIf",t.book.relationships.photos.builded))},directives:[v.a,i.j,c.b,i.i],pipes:[i.d],encapsulation:2}),T)}],S=((w=function t(){o(this,t)}).\u0275mod=u.Cb({type:w}),w.\u0275inj=u.Bb({factory:function(o){return new(o||w)},imports:[[c.c.forChild(E)],c.c]}),w),P=n("SuZp"),B=((F=function t(){o(this,t)}).\u0275mod=u.Cb({type:F}),F.\u0275inj=u.Bb({factory:function(o){return new(o||F)},imports:[[i.b,P.a,S]]}),F)}}])}();