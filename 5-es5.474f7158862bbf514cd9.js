!function(){function t(t,o){for(var b=0;b<o.length;b++){var e=o[b];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function o(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{zQpX:function(b,e,a){"use strict";a.r(e),a.d(e,"AuthorsModule",(function(){return S}));var n=a("SVse"),i=a("iInd"),c=a("hnLn"),r=a("1a3L"),u=a("8Y7J"),s=a("4H9A"),h=a("CZaM");function l(t,o){1&t&&(u.Hb(0,"td",7),u.cc(1,"-no books-"),u.Gb())}function d(t,o){if(1&t&&(u.Hb(0,"span"),u.cc(1),u.Gb()),2&t){var b=u.Pb(2).$implicit;u.ub(1),u.ec(" and ",b.relationships.books.data.length," more... ")}}var p=function(t){return["/books",t]};function f(t,o){if(1&t&&(u.Hb(0,"td"),u.Hb(1,"a",3),u.cc(2),u.Gb(),u.bc(3,d,2,1,"span",6),u.Gb()),2&t){var b=u.Pb().$implicit;u.ub(1),u.Tb("routerLink",u.Xb(3,p,b.relationships.books.data[0].id)),u.ub(1),u.dc(b.relationships.books.data[0].attributes.title),u.ub(1),u.Tb("ngIf",b.relationships.books.data.length>1)}}var H=function(t){return["/authors",t]};function m(t,o){if(1&t&&(u.Hb(0,"tr"),u.Hb(1,"td"),u.cc(2),u.Gb(),u.Hb(3,"td"),u.Hb(4,"a",3),u.cc(5),u.Gb(),u.Hb(6,"code",4),u.Hb(7,"small"),u.cc(8),u.Qb(9,"date"),u.Gb(),u.Gb(),u.Hb(10,"code"),u.Hb(11,"small"),u.cc(12),u.Gb(),u.Gb(),u.Gb(),u.Hb(13,"td"),u.cc(14),u.Qb(15,"date"),u.Gb(),u.Hb(16,"td"),u.cc(17),u.Qb(18,"date"),u.Gb(),u.bc(19,l,2,0,"td",5),u.bc(20,f,4,5,"td",6),u.Hb(21,"td"),u.cc(22),u.Gb(),u.Gb()),2&t){var b=o.$implicit;u.ub(2),u.dc(b.id),u.ub(2),u.Tb("routerLink",u.Xb(17,H,b.id)),u.ub(1),u.dc(b.attributes.name),u.ub(3),u.dc(u.Sb(9,10,b.cache_last_update,"H:MM:SS")),u.ub(4),u.dc(b.source),u.ub(2),u.dc(u.Rb(15,13,b.attributes.date_of_birth)),u.ub(3),u.dc(u.Rb(18,15,b.attributes.date_of_death)),u.ub(2),u.Tb("ngIf",b.relationships.books.data.length<1),u.ub(1),u.Tb("ngIf",b.relationships.books.data.length>0),u.ub(2),u.ec(" ",b.relationships.photos.data.length," ")}}var G,g=((G=function t(b,e,a){var n=this;o(this,t),this.route=b,this.authorsService=e,b.queryParams.subscribe((function(t){var o=t.page;e.all({include:["books"],sort:["name"],page:{number:o||1},ttl:3600}).subscribe((function(t){n.authors=t}),(function(t){return console.error("Could not load authors :(",t)}))}))}).\u0275fac=function(t){return new(t||G)(u.Eb(i.a),u.Eb(r.a),u.Eb(c.a))},G.\u0275cmp=u.yb({type:G,selectors:[["demo-authors"]],decls:20,vars:4,consts:[[3,"collection"],[1,"table","table-striped"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],["title","Cache last update"],["class","text-muted",4,"ngIf"],[4,"ngIf"],[1,"text-muted"]],template:function(t,o){1&t&&(u.Hb(0,"h3"),u.cc(1,"Authors"),u.Gb(),u.Fb(2,"demo-collection-info",0),u.Hb(3,"table",1),u.Hb(4,"thead"),u.Hb(5,"tr"),u.Hb(6,"th"),u.cc(7,"ID"),u.Gb(),u.Hb(8,"th"),u.cc(9,"Name"),u.Gb(),u.Hb(10,"th"),u.cc(11,"Date of birth"),u.Gb(),u.Hb(12,"th"),u.cc(13,"Date of dead"),u.Gb(),u.Hb(14,"th"),u.cc(15,"Books"),u.Gb(),u.Hb(16,"th"),u.cc(17,"Photos"),u.Gb(),u.Gb(),u.Gb(),u.bc(18,m,23,19,"tr",2),u.Gb(),u.Fb(19,"demo-collection-paginator",0)),2&t&&(u.ub(2),u.Tb("collection",o.authors),u.ub(16),u.Tb("ngForOf",o.authors.data)("ngForTrackBy",o.authors.trackBy),u.ub(1),u.Tb("collection",o.authors))},directives:[s.a,n.i,h.a,i.b,n.j],pipes:[n.d],encapsulation:2}),G),v=a("zNQn"),k=a("dC/6");function T(t,o){1&t&&(u.Hb(0,"span"),u.cc(1," This author don't have any photo :(\n"),u.Gb())}function w(t,o){if(1&t&&u.Fb(0,"img",7),2&t){var b=o.$implicit;u.Vb("title","Book id #",b.id,""),u.Tb("src",b.attributes.uri,u.Zb)}}function y(t,o){if(1&t&&(u.Hb(0,"span"),u.bc(1,w,1,2,"img",6),u.Gb()),2&t){var b=u.Pb();u.ub(1),u.Tb("ngForOf",b.author.relationships.photos.data)}}var F=function(t){return["/books",t]};function I(t,o){if(1&t&&(u.Hb(0,"tr"),u.Hb(1,"td"),u.cc(2),u.Gb(),u.Hb(3,"td"),u.Hb(4,"a",10),u.cc(5),u.Gb(),u.Gb(),u.Hb(6,"td"),u.cc(7),u.Qb(8,"date"),u.Gb(),u.Gb()),2&t){var b=o.$implicit;u.ub(2),u.dc(b.id),u.ub(2),u.Tb("routerLink",u.Xb(6,F,b.id)),u.ub(1),u.dc(b.attributes.title),u.ub(2),u.dc(u.Rb(8,4,b.attributes.date_published))}}function O(t,o){if(1&t&&(u.Hb(0,"table",8),u.Hb(1,"thead"),u.Hb(2,"tr"),u.Hb(3,"th"),u.cc(4,"ID"),u.Gb(),u.Hb(5,"th"),u.cc(6,"Title"),u.Gb(),u.Hb(7,"th"),u.cc(8,"Date Published"),u.Gb(),u.Gb(),u.Gb(),u.bc(9,I,9,8,"tr",9),u.Gb()),2&t){var b=u.Pb();u.ub(9),u.Tb("ngForOf",b.author.relationships.books.data)}}var _,j,R,A=[{path:"",component:g},{path:":id",component:(_=function(){function b(t,e,a,n){var i=this;o(this,b),this.authorsService=t,this.photosService=e,this.route=n,n.params.subscribe((function(o){var b=o.id;t.get(b,{include:["books","photos"],ttl:100}).subscribe((function(t){i.author=t}),(function(t){return console.error("Could not load author.",t)}))}))}var e,a,n;return e=b,(a=[{key:"newAuthor",value:function(){var t=this.authorsService.new();t.attributes.name=prompt("New author name:","John Doe"),t.attributes.name&&(t.attributes.date_of_birth="2030-12-10",console.log("author data for save",t.toObject()),t.save().subscribe((function(o){console.log("author saved",t.toObject())})))}},{key:"updateAuthor",value:function(){var t=this;this.author.attributes.name=prompt("Author name:",this.author.attributes.name),console.log("author data for save with book include",this.author.toObject({include:["books"]})),console.log("author data for save without any include",this.author.toObject()),this.author.save().subscribe((function(o){console.log("author saved",t.author.toObject())}))}},{key:"removeRelationship",value:function(){this.author.removeRelationship("photos","1"),this.author.save(),console.log("removeRelationship save with photos include",this.author.toObject())}}])&&t(e.prototype,a),n&&t(e,n),b}(),_.\u0275fac=function(t){return new(t||_)(u.Eb(r.a),u.Eb(v.a),u.Eb(c.a),u.Eb(i.a))},_.\u0275cmp=u.yb({type:_,selectors:[["demo-author"]],decls:37,vars:14,consts:[[3,"resource"],[3,"click"],[3,"collection"],[4,"ngIf"],["class","table table-striped",4,"ngIf"],["routerLink","/authors"],["height","150","style","padding-right: 1em",3,"src","title",4,"ngFor","ngForOf"],["height","150",2,"padding-right","1em",3,"src","title"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,o){1&t&&(u.Hb(0,"h3"),u.cc(1),u.Gb(),u.Fb(2,"demo-resource-info",0),u.Hb(3,"ul"),u.Hb(4,"li"),u.cc(5,"Name: "),u.Hb(6,"strong"),u.cc(7),u.Gb(),u.Gb(),u.Hb(8,"li"),u.cc(9,"Date of birth: "),u.Hb(10,"strong"),u.cc(11),u.Qb(12,"date"),u.Gb(),u.Gb(),u.Hb(13,"li"),u.cc(14,"Date of dead: "),u.Hb(15,"strong"),u.cc(16),u.Qb(17,"date"),u.Gb(),u.Gb(),u.Gb(),u.Hb(18,"p"),u.Hb(19,"button",1),u.Nb("click",(function(){return o.newAuthor()})),u.cc(20,"New author"),u.Gb(),u.Hb(21,"button",1),u.Nb("click",(function(){return o.updateAuthor()})),u.cc(22,"Update author"),u.Gb(),u.Hb(23,"button",1),u.Nb("click",(function(){return o.removeRelationship()})),u.cc(24,"Remove relationship"),u.Gb(),u.Gb(),u.Hb(25,"h4"),u.cc(26,"Photos"),u.Gb(),u.Fb(27,"demo-collection-info",2),u.bc(28,T,2,0,"span",3),u.bc(29,y,2,1,"span",3),u.Hb(30,"h4"),u.cc(31,"Books"),u.Gb(),u.Fb(32,"demo-collection-info",2),u.bc(33,O,10,1,"table",4),u.Hb(34,"p"),u.Hb(35,"a",5),u.cc(36,"Volver"),u.Gb(),u.Gb()),2&t&&(u.ub(1),u.ec("Author #",o.author.id,", with books and photos"),u.ub(1),u.Tb("resource",o.author),u.ub(5),u.dc(o.author.attributes.name),u.ub(4),u.dc(u.Rb(12,10,o.author.attributes.date_of_birth)),u.ub(5),u.dc(u.Rb(17,12,o.author.attributes.date_of_death)),u.ub(11),u.Tb("collection",o.author.relationships.photos),u.ub(1),u.Tb("ngIf",0===o.author.relationships.photos.data.length),u.ub(1),u.Tb("ngIf",o.author.relationships.photos.builded),u.ub(3),u.Tb("collection",o.author.relationships.books),u.ub(1),u.Tb("ngIf",o.author.relationships.books.builded))},directives:[k.a,s.a,n.j,i.b,n.i],pipes:[n.d],encapsulation:2}),_)}],C=((j=function t(){o(this,t)}).\u0275mod=u.Cb({type:j}),j.\u0275inj=u.Bb({factory:function(t){return new(t||j)},imports:[[i.c.forChild(A)],i.c]}),j),P=a("SuZp"),S=((R=function t(){o(this,t)}).\u0275mod=u.Cb({type:R}),R.\u0275inj=u.Bb({factory:function(t){return new(t||R)},imports:[[n.b,P.a,C]]}),R)}}])}();